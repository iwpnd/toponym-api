AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: >
    Toponym API
Globals:
    Function:
        Timeout: 300
Resources:
    ToponymApiLambda:
        Type: AWS::Serverless::Function
        Properties:
            FunctionName: toponym-api-lambda
            CodeUri: ./
            Handler: toponym_api.main.handler
            Runtime: python3.7
            Role: !Sub arn:aws:iam::${AWS::AccountId}:role/ToponymApiRole
            Events:
                CatchAll:
                    Type: Api
                    Properties:
                        Path: /{proxy+}
                        Method: ANY
Outputs:
    ToponymApi:
      Description: "API Gateway endpoint URL for toponym-api-lambda"
      Value: !Sub "https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/prod"
    ToponymApiLambda:
      Description: "ToponymApiLambda ARN"
      Value: !GetAtt ToponymApiLambda.Arn
